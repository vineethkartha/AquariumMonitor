<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Temperature Chart</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <h2>Temperature Readings for {{ selected_date }}</h2>

    <form method="get" action="/temperature_chart">
        <label for="date">Select Date:</label>
        <input type="date" id="date" name="date" value="{{ selected_date }}">
        <button type="submit">Go</button>
    </form>

    <canvas id="temperatureChart" width="800" height="400"></canvas>

    <script>
      const rawData = {{ chart_data | tojson }};
      const labels = rawData.map(entry => entry.timestamp);
      const temperatures = rawData.map(entry => entry.temperature);
      
      const ctx = document.getElementById('temperatureChart').getContext('2d');
      new Chart(ctx, {
          type: 'line',
          data: {
              labels: labels,
              datasets: [{
                  label: 'Temperature (°C)',
                  data: temperatures,
                  borderColor: 'rgba(75, 192, 192, 1)',
                  fill: false,
                  tension: 0.3
              }]
          },
          options: {
              scales: {
                  x: {
                      title: {
                          display: true,
                          text: 'Time'
                      }
                  },
                    y: {
                        title: {
                            display: true,
                            text: 'Temperature (°C)'
                        }
                    }
              }
          }
      });
    </script>
</body>
</html>
